{% extends '::insight/base_insight.html.twig' %}
{% block title %}

    {% trans %}Detalle{% endtrans %}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('css/datepicker.css') }}" rel="stylesheet"/>
    <script src="{{ asset('js/datepicker/jquery-datepicker.js') }}"></script>
    <script src="{{ asset('js/datepicker/jquery.ui.datepicker-es.js') }}"></script>
    <script src="/Symfony/vendor/ob/highcharts-bundle/Ob/HighchartsBundle/Resources/public/js/highcharts/highcharts.js"></script>
    <script src="/Symfony/vendor/ob/highcharts-bundle/Ob/HighchartsBundle/Resources/public/js/highcharts/modules/exporting.js"></script>
{% endblock %}

{% block migas %}
    <p>
        <span class="ml1">{% trans %}Insight>{% endtrans %}</span> > <span class="mlN">{% trans %}
            Dashboard{% endtrans %}</span>
    </p>
{% endblock %}

{% block contenedorPrincipal %}

    <div class="bloque_contenido">

        <div class="cabecera_contenido">
            <span>{% trans %}Detalle{% endtrans %}</span>
        </div>
        <div class="bloque_contenido sinborde">
            <div class="linea_contenido">
                <label>{% trans %}Compara&nbsp;&nbsp;{% endtrans %}</label>
                <select id="id_categoria" name="id_categoria" class="tam6 izq actualizarTabla">
                    <option value="-1">{% trans %}Seleccione{% endtrans %}</option>
                    <option value="1">{% trans %}Ene-2014{% endtrans %}</option>
                    <option value="2">{% trans %}Feb-2014{% endtrans %}</option>
                    <option value="3">{% trans %}Mar-2014{% endtrans %}</option>
                    <option value="4">{% trans %}Abr-2014{% endtrans %}</option>
                    <option value="5">{% trans %}May-2014{% endtrans %}</option>
                    <option value="6">{% trans %}Jun-2014{% endtrans %}</option>
                    <option value="7">{% trans %}Jul-2014{% endtrans %}</option>
                    <option value="8" selected>{% trans %}Ago-2014{% endtrans %}</option>
                    <option value="9">{% trans %}Sep-2014{% endtrans %}</option>
                    <option value="10">{% trans %}Oct-2014{% endtrans %}</option>
                    <option value="11">{% trans %}Nov-2014{% endtrans %}</option>
                    <option value="12">{% trans %}Dic-2014{% endtrans %}</option>
                </select>
                <label>{% trans %}&nbsp;&nbsp;con&nbsp;&nbsp;{% endtrans %}</label>
                <select id="id_categoria" name="id_categoria" class="tam6 izq actualizarTabla">
                    <option value="-1">{% trans %}Seleccione{% endtrans %}</option>
                    <option value="1">{% trans %}Ene-2014{% endtrans %}</option>
                    <option value="2">{% trans %}Feb-2014{% endtrans %}</option>
                    <option value="3">{% trans %}Mar-2014{% endtrans %}</option>
                    <option value="4">{% trans %}Abr-2014{% endtrans %}</option>
                    <option value="5">{% trans %}May-2014{% endtrans %}</option>
                    <option value="6">{% trans %}Jun-2014{% endtrans %}</option>
                    <option value="7">{% trans %}Jul-2014{% endtrans %}</option>
                    <option value="8">{% trans %}Ago-2014{% endtrans %}</option>
                    <option value="9">{% trans %}Sep-2014{% endtrans %}</option>
                    <option value="10">{% trans %}Oct-2014{% endtrans %}</option>
                    <option value="11">{% trans %}Nov-2014{% endtrans %}</option>
                    <option value="12" selected>{% trans %}Dic-2014{% endtrans %}</option>
                </select>
            </div>
            <div class="bloque_contenido sinborde">
                <table class="tablaSinBordes">
                    <tbody>
                    <tr>
                        <td colspan="2">
                            <table class="tablaSinBordes">
                                <tbody>
                                <tr>
                                    <td>
                                        <table>
                                            <thead>
                                            <tr>
                                                <th colspan="4" style="text-align: center;">{% trans %}
                                                    Amplitud{% endtrans %}</th>
                                            </tr>
                                            </thead>
                                            <thead>
                                            <tr>
                                                <th style="text-align: center;">{% trans %}Gasto
                                                    Total{% endtrans %}</th>
                                                <th style="text-align: center;">{% trans %}Baja{% endtrans %}</th>
                                                <th style="text-align: center;">{% trans %}Media{% endtrans %}</th>
                                                <th style="text-align: center;">{% trans %}Alta{% endtrans %}</th>
                                            </tr>
                                            </thead>
                                            {% for count in countGasto %}
                                                <tr>
                                                    <td style="text-align: center;" width="25%">
                                                        {{ count[0] }}
                                                    </td>
                                                    <td style="text-align: center;" width="25%">
                                                        {{ count[1] }}
                                                    </td>
                                                    <td style="text-align: center;" width="25%">
                                                        {{ count[2] }}
                                                    </td>
                                                    <td style="text-align: center;" width="25%">
                                                        {{ count[3] }}
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                        </table>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            {% trans %}&nbsp;{% endtrans %}
                        </td>
                    </tr>
                    <tr>
                        <td width="50%" align="center">
                            <div id="graficoCategoria"></div>
                        </td>
                        <td width="50%" align="center">
                            <div id="graficoBarras"></div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            {% trans %}&nbsp;{% endtrans %}
                        </td>
                    </tr>
                    </tbody>
                </table>

            </div>

        </div>
    </div>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        $(function () {
            $('.date-picker').datepicker({
                changeMonth: true,
                changeYear: true,
                showButtonPanel: true,
                dateFormat: 'MM yy',
                onClose: function (dateText, inst) {
                    var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
                    var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
                    $(this).datepicker('setDate', new Date(year, month, 1));
                }
            });
        });

        $(function () {
            $('#graficoBarras').highcharts({
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Evolucion Frescos'
                },
                subtitle: {
                    text: ''
                },
                xAxis: {
                    categories: [
                        'Agosto',
                        'Septiembre',
                        'Octubre',
                    ]
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Gasto'
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                    '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: 'Gasto',
                    data: [23, 15.5, 17.4],
                    color: '#FF8000'
                }]
            });
        });

        $(function () {

            $(document).ready(function () {

                // Build the chart
                $('#graficoCategoria').highcharts({
                    chart: {
                        plotBackgroundColor: null,
                        plotBorderWidth: null,
                        plotShadow: false
                    },
                    title: {
                        text: 'Categorias ',
                    },
                    tooltip: {
                        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                    },
                    plotOptions: {
                        pie: {
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true
                            },
                            showInLegend: true
                        }
                    },
                    series: [{
                        type: 'pie',
                        name: 'Clientes nuevos por Categorias',
                        data: [
                            ['Alimentacion Seca', 45],
                            ['Consumibles', 26],
                            {
                                name: 'Frescos',
                                y: 8,
                                sliced: true,
                                selected: true,
                                color: '#FF8000'
                            },
                            ['No alimentacion', 64],
                            ['Refrigerados', 70],
                            ['Servicios', 72],
                            ['Socio-Cliente', 34],
                        ]
                    }]
                });
            });

        });

    </script>
{% endblock %}
