<h4 class="widgettitle">{{ "creatividades" |trans|title }}</h4>
<table class="table table-bordered responsive">
    <colgroup>
        <col class="con0" style="align: center;">
        <col class="con1" style="align: center; ">
        <col class="con0" style="align: center; ">
        <col class="con1" style="align: center; ">
        <col class="con0">
        <col class="con1">
    </colgroup>
    <thead>
    <tr>
        <th>{{ "nombre" | trans }}</th>
        <th>{{ "descripcion" | trans }}</th>
        <th>{{ "imagen" | trans }}</th>
    </tr>
    </thead>
    <tbody>
    {% if objCreatividades == null %}
        <tr>
            <td colspan="30">
                {{ "sin.resultados" | trans }}
            </td>
        </tr>
    {% else %}
        {% for objCreatividad in objCreatividades %}
            <tr>
                <td>
                    <a href="javascript:verDatosProducto({{ objCreatividad.idCreatividad }}); ">{{ objCreatividad.nombre }}</a>
                </td>
                <td>{{ objCreatividad.descripcion }}</td>
                <td>
                    {# Se comprueba que la imagen existe para poder pintarla con respecto a los formatos disponibles #}
                    {% set existeImagen = 0 %}
                    {% set imagenUrl = "" %}
                    {% for cadFormato in extensionFormatoImages %}
                        {% set imagen= web_path~"/"~app.user.getCliente()~'/imagenesCreatividad/'~objCreatividad.idCreatividad~cadFormato %}
                        {% if file_exists(imagen) %}
                            {% set existeImagen = 1 %}
                            {% set imagenUrl = app.user.getCliente()~'/imagenesCreatividad/'~objCreatividad.idCreatividad~cadFormato %}
                        {% endif %}
                    {% endfor %}
                    {% if(existeImagen == 1) %}
                        <img src="{{ asset(imagenUrl) }}?={{ random(500) }}" width="100px" height="100px"/>
                    {% else %}
                        &nbsp;
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
    {% endif %}
</table>
<div class="row-fluid">
    <div class="span12">
        <div class="pagination pagination-centered">
            {{ simple_paginator_render('direct_config_listado_creatividad_paginador', null, {
            'routeParams' : {'nombre': nombre},
            'container_class' : '',
            'first_disabled': 'disabled',
            'currentClass': 'active',
            'firstEnabledClass': '',
            'firstDisableClass': 'disabled',
            'firstPageText' : '<<Primera',
            'previousPageText' : 'Anterior',
            'previousEnabledClass' : '',
            'previousDisabledClass' : 'disabled',
            'nextPageText' : 'Siguiente',
            'nextEnabledClass': '',
            'nextDisabledClass': 'disabled',
            'lastEnabledClass': '',
            'lastDisabledClass' : 'disabled',
            'lastPageText' : 'Ãšltima>>'
            }) }}
        </div>
    </div>
</div>

{% block javascript %}
    <script type="text/javascript">
        function verDatosProducto(id_creatividad) {
            var largo = 550;
            var altura = 550;
            var top = (screen.height - altura) / 2;
            var izquierda = (screen.width - largo) / 2;
            {% set nombreVentana = "Creatividad" %}
            camino = "{{ path('direct_config_ficha_creatividad', {'id_creatividad':'111'}) }}";
            camino = camino.replace('111', id_creatividad);
            var myUrl = camino;
            var nomVentana = '{{ nombreVentana }}';
            window.open(myUrl, nomVentana, "width=" + largo + ",height=" + altura + ",top=" + top + ",left=" + izquierda);
        }
    </script>
{% endblock %}