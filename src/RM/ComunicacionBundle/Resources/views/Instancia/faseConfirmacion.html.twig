{% extends 'RMComunicacionBundle:Instancia:baseFasesInstancia.html.twig' %}


{% block contenedorPrincipal %}
	{{ parent() }}

    <h4 class="widgettitle">{{ "info" | trans | title}}</h4>
    <div class="mediamgr_head">
        <form name=previewForm id=previewForm action="{{ path('direct_monitor_preview', {'id_instancia': objInstancia.getIdInstancia})}}" method="post">
            <input type="hidden" name='numComunicaciones' id='numComunicaciones' value={{ numComunicaciones }}>
            <input type="hidden" id="preview" name="preview" value="preview">
            <input type="hidden" id="idSegmento" name="idSegmento" value="preview">
            <table class="table">
                <tbody>
                    <tr>
                        <td class="sinborde"> Se han generado {{numComunicaciones }} comunicaciones</td>
                        <td class="sinborde pull-right"><button class="btn btn-primary">{{ "boton.previsualizar" | trans }}</button></td>
                    </tr>
                    <tr>
                        <td class="sinborde">...</td>
                    </tr>
                </tbody>
            </table>
        </form>
    </div>


    <h4 class="widgettitle">{{ "opciones.email" | trans | title}}</h4>
		<div class="mediamgr_head">
			<form name=form id=form action="{{ path('direct_monitor_finalizar', {'id_instancia': objInstancia.getIdInstancia})}}" method="post">
			
			<table class="table">
				<tbody>
					<tr>
						<td class="sinborde">
							<input type="radio" onclick="deshabilitarDatepicker();" name="envio" id="envio_inmediato" value="0" checked><label
                                    for="envio_inmediato">{{ 'modulo.direct.fase.finalizada.envio.inmediato'| trans }}</label>
						</td>					
					</tr>
					<tr>
						<td class="sinborde">
							<input type="radio" onclick="habilitarDatepicker();" name="envio" id="envio_programado" value="1"><label
                                    for="envio_programado">{{ 'modulo.direct.fase.finalizada.envio.programado' | trans }}</label>
							<input class='datepicker' type="text" required="required" name="fecha" id="fecha"><label for="fecha"></label>
							
						</td>					
					</tr>
				</tbody>
			</table>
                </form>
		</div>
    <h4 class="widgettitle">{{ "opciones.batch" | trans | title}}</h4>
		<div class="mediamgr_head">
			<table class="table">
				<tbody>
					<tr>
						<td class="sinborde">
							<b>{{ "modulo.direct.fase.finalizada.formatos" | trans }}:</b>
						</td>					
					</tr>
					<tr>
						<td class="sinborde">
							<input type="radio" id="xpd" name="formato" value="XPD" checked><label for="xpd">{{ "modulo.direct.fase.finalizada.xpd" | trans }}</label>
						</td>					
					</tr>
					<tr>
						<td class="sinborde">
							<input type="radio" id="xml" name="formato" value="XML"><label for="xml">{{ "modulo.direct.fase.finalizada.xml" | trans }}</label>
						</td>					
					</tr>
					<tr>
						<td class="sinborde">
							<input type="radio" id="dat" name="formato" value="DAT"><label for="dat">{{ "modulo.direct.fase.finalizada.dat" | trans }}</label>
						</td>					
					</tr>
					<tr>
						<td class="sinborde">
							{{ " " | trans }}
						</td>					
					</tr>
					<tr>
						<td class="sinborde">
							<b>{{ "otros" | trans }}:</b>
						</td>					
					</tr>
					<tr>
						<td class="sinborde">
							<input type="radio" onclick="habilitarDescarga();" name="otros" id="descarga" value="Descarga" checked>
                            <label for="descarga">{{ "boton.descargar" | trans }}</label>
						</td>					
					</tr>
					<tr>
						<td class="sinborde">
							<input type="radio"  id="ftp" onclick="habilitarFTP();" name="otros" value="FTP"><label for="ftp">{{ "modulo.direct.fase.finalizada.ftp" |trans}}</label>
						</td>
						<td class="sinborde">
                            <label for="server">{{ "modulo.direct.fase.finalizada.server" | trans }}</label><input type="text" name="server" id="server">
						</td>
						<td class="sinborde">
                            <label for="user">{{ "modulo.direct.fase.finalizada.user" | trans }}</label><input type="text" name="user" id="user">
						</td>
						<td class="sinborde">
                            <label for="pass">{{ "modulo.direct.fase.finalizada.pass" | trans }}</label><input type="text" name="pass" id="pass">
						</td>					
					</tr>
					<tr>
						<td class="sinborde">
                            <label for="otros">{{ "modulo.direct.fase.finalizada.post" | trans }}</label><input type="radio" onclick="habilitarURL();" name="otros" id="otros" value="POST">
						</td>
						<td class="sinborde">
                            <label for="url">{{ "modulo.direct.fase.finalizada.url" | trans }}</label><input type="text" name="url" id="url">
						</td>						
					</tr>
					<tr>
						<td class="sinborde">
							{{ " " | trans }}
						</td>					
					</tr>
				</tbody>
			</table>
		</div>
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script type="text/javascript">

		$(document).ready(function() {
			$("#datepicker").datepicker( { disabled : true } );
			$( "datepicker" ).datepicker({ dateFormat: "dd/mm/yy hh:mm" });

			deshabilitarURL();
			deshabilitarFTP();
		});

		$(function() 
		{
			 $( "#datepicker" ).datepicker();
		});
		
		function botonGuardarConf()
		{
			
		}

		function habilitarDatepicker()
		{
			$("#datepicker").datepicker("option", "disabled", false);
		}
		function deshabilitarDatepicker()
		{
			$("#datepicker").datepicker("option", "disabled", true);
		}
		function habilitarFTP()
		{
			var server = document.getElementById('server');
			var user= document.getElementById('user');
			var pass = document.getElementById('pass');

			server.disabled = false;
			user.disabled = false;
			pass.disabled = false;

			deshabilitarURL();
		}
		function deshabilitarFTP()
		{
			var server = document.getElementById('server');
			var user= document.getElementById('user');
			var pass = document.getElementById('pass');

			server.disabled = true;
			user.disabled = true;
			pass.disabled = true;
		}
		function deshabilitarURL()
		{
			var url = document.getElementById('url');
			url.disabled = true;
		}
		function habilitarURL()
		{
			var url = document.getElementById('url');

			url.disabled = false;

			deshabilitarFTP();
		}
		function habilitarDescarga()
		{
			deshabilitarFTP();
			deshabilitarURL();
		}
		
	</script>
{% endblock %}